if (self.CavalryLogger) { CavalryLogger.start_js(["1O\/p1"]); }

__d("XProfileFunFactsAskPromptCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/profile/fun_facts/ask_prompt/create/",{})}),null);
__d("FunFactAskPromptSelector.react",["cx","AsyncRequest","AsyncResponse","ContentState","EditorState","FlexLayout.react","FunFactStrings","PlainTextEditor.react","React","TextWithEmoticons.react","XProfileFunFactsAskPromptCreateController","XUIButton.react","XUISpinner.react","isEmpty"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=100,l=128173;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state=this.$FunFactAskPromptSelector2(),this.$FunFactAskPromptSelector7=function(){this.setState({isSaving:true});var s=c("XProfileFunFactsAskPromptCreateController").getURIBuilder().getURI();new(c("AsyncRequest"))().setMethod("POST").setURI(s).setData({emoji:String.fromCodePoint(l),title:this.state.editorState.getCurrentContent().getPlainText()}).setHandler(function(t){this.props.onSave(t.getPayload())}.bind(this)).setErrorHandler(function(t){c("AsyncResponse").defaultErrorHandler(t);this.setState(this.$FunFactAskPromptSelector2())}.bind(this)).send()}.bind(this),this.$FunFactAskPromptSelector5=function(s){var t=s.getCurrentContent().getPlainText();this.setState({editorState:s,isSaveDisabled:c("isEmpty")(t)||t.length>k})}.bind(this),o}m.prototype.$FunFactAskPromptSelector2=function(){return{editorState:c("EditorState").createWithContent(c("ContentState").createFromText("")),isSaveDisabled:true,isSaving:false}};m.prototype.$FunFactAskPromptSelector3=function(){var n=String.fromCodePoint(l),o=c("React").createElement("div",{className:"_4s3r _4s3s _3-8y"},c("React").createElement(c("PlainTextEditor.react"),{editorState:this.state.editorState,handleBeforeInput:this.$FunFactAskPromptSelector4,onChange:this.$FunFactAskPromptSelector5,placeholder:c("FunFactStrings").SINGLE_PROMPT_ASK_QUESTION_PLACEHOLDER,ref:function(p){return this.$FunFactAskPromptSelector1=p}.bind(this)}));return c("React").createElement(c("FlexLayout.react"),{align:"center",className:"_4s3u",direction:"vertical",justify:"center"},c("React").createElement(c("TextWithEmoticons.react"),{size:32,text:n}),o)};m.prototype.$FunFactAskPromptSelector6=function(){var n=null;if(this.state.isSaving)n=c("React").createElement(c("XUISpinner.react"),{className:"_3-90 _3-8x"});return c("React").createElement(c("FlexLayout.react"),{className:"_2ph_",direction:"horizontal",justify:"end"},n,c("React").createElement(c("XUIButton.react"),{disabled:this.state.isSaveDisabled||this.state.isSaving,label:c("FunFactStrings").SINGLE_PROMPT_SAVE_AND_TAG,onClick:this.$FunFactAskPromptSelector7,size:"large",use:"confirm"}))};m.prototype.$FunFactAskPromptSelector4=function(n,o){var p=o.getCurrentContent().getPlainText().length;if(p>=k)return"handled";return"not-handled"};m.prototype.componentDidMount=function(){this.$FunFactAskPromptSelector1&&this.$FunFactAskPromptSelector1.focus()};m.prototype.render=function(){return c("React").createElement("div",null,this.$FunFactAskPromptSelector3(),this.$FunFactAskPromptSelector6())};f.exports=m}),null);
__d("ReactComposerFunFactSinglePromptDialog.react",["ix","cx","DialogExpansion","FunFactAskPromptSelector.react","FunFactSinglePromptSelector.react","FunFactStrings","Image.react","LayerFadeOnHide","Layout.react","ProfileFunFactsTestIDs","React","TabBar.react","TabBarItem.react","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("Layout.react").Column,m=c("Layout.react").FillColumn,n=500,o=600,p=Object.freeze({ANSWER:"answer",ASK:"ask"});j=babelHelpers.inherits(q,c("React").Component);k=j&&j.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.state={selectedTab:p.ANSWER},this.$ReactComposerFunFactSinglePromptDialog2=function(w){this.setState({selectedTab:w})}.bind(this),s}q.prototype.render=function(){return c("React").createElement(c("XUIDialog.react"),{behaviors:{DialogExpansion:c("DialogExpansion"),LayerFadeOnHide:c("LayerFadeOnHide"),LayerFadeOnShow:null},"data-testid":c("ProfileFunFactsTestIDs").DIALOG,isStrictlyControlled:true,onHide:this.props.onClose,shown:this.props.showDialog,width:this.props.showAskFriendTab?o:n},c("React").createElement(c("XUIDialogTitle.react"),{className:"_4xqu"},c("FunFactStrings").SINGLE_PROMPT_DIALOG_TITLE),c("React").createElement(c("XUIDialogBody.react"),{useCustomPadding:true},c("React").createElement(c("Layout.react"),{className:"_4xqv _2ph_"},this.props.showAskFriendTab?c("React").createElement(l,{className:"_3-91"},this.$ReactComposerFunFactSinglePromptDialog1()):null,c("React").createElement(m,{className:"_64pf"},this.state.selectedTab===p.ANSWER?c("React").createElement(c("FunFactSinglePromptSelector.react"),this.props):c("React").createElement(c("FunFactAskPromptSelector.react"),this.props)))))};q.prototype.$ReactComposerFunFactSinglePromptDialog1=function(){return c("React").createElement(c("TabBar.react"),{activeTabKey:this.state.selectedTab,className:"_63_w",onTabClick:this.$ReactComposerFunFactSinglePromptDialog2,orientation:"vertical"},c("React").createElement(c("TabBarItem.react"),{className:"_63_x",key:p.ANSWER},c("React").createElement(c("Image.react"),{className:"_3-90",src:h("407305")}),c("FunFactStrings").SINGLE_PROMPT_ANSWER_TAB),c("React").createElement(c("TabBarItem.react"),{className:"_63_x",key:p.ASK},c("React").createElement(c("Image.react"),{className:"_3-90",src:h("400375")}),c("FunFactStrings").SINGLE_PROMPT_ASK_TAB))};f.exports=q}),null);
__d("XProfileFunFactsSinglePromptFetchController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/profile/fun_facts/single_prompt/fetch/",{fetch_amount:{type:"Int"},pinned_prompt_id:{type:"FBID"}})}),null);
__d("ReactComposerFunFactSinglePromptTaggerContainer.react",["cx","Arbiter","AsyncRequest","ReactComposerAttachmentStore","ReactComposerFunFactTaggerComponent.react","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerHideOnEscapeKeyPress.react","ReactComposerTaggerStore","ReactComposerTaggerType","FlexLayout.react","FluxContainer","ProfileFunFactsComposerEvents","ProfileFunFactsReactComposerTypedLogger","React","ReactComposerContextTypes","XProfileFunFactsSinglePromptFetchController","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$ReactComposerFunFactSinglePromptTaggerContainer2=function(){new(c("ProfileFunFactsReactComposerTypedLogger"))().setEvent(c("ProfileFunFactsComposerEvents").PROMPTS_CANCEL).setFunFactPromptID(this.state.taggerData.id).log();c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,null)}.bind(this),m}k.getStores=function(){return[c("ReactComposerAttachmentStore"),c("ReactComposerTaggerStore")]};k.calculateState=function(l,m,n){var o=n.composerID,p=!!m.pinnedPromptID;return{isAttached:c("ReactComposerTaggerStore").hasData(o,c("ReactComposerTaggerType").FUN_FACT),isDisabled:c("ReactComposerTaggerStore").isDisabled(o,c("ReactComposerTaggerType").FUN_FACT),isLoading:l?l.isLoading:p,taggerData:c("ReactComposerTaggerStore").getTaggerData(o,c("ReactComposerTaggerType").FUN_FACT)}};k.prototype.componentDidMount=function(){c("Arbiter").inform("ReactFeedComposerXBootloader/funfactsloaded/"+this.context.composerID);if(this.props.pinnedPromptID)this.$ReactComposerFunFactSinglePromptTaggerContainer1()};k.prototype.$ReactComposerFunFactSinglePromptTaggerContainer1=function(){c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,{promptID:this.props.pinnedPromptID});var l=c("XProfileFunFactsSinglePromptFetchController").getURIBuilder().setInt("fetch_amount",1).setFBID("pinned_prompt_id",this.props.pinnedPromptID).getURI();new(c("AsyncRequest"))(l).setHandler(function(m){var n=this.state.taggerData;n.prompt=m.getPayload()[0];c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,n);this.setState({isLoading:false})}.bind(this)).send()};k.prototype.render=function(){if(!this.state.isAttached||this.state.isDisabled)return null;if(this.state.isLoading)return c("React").createElement(c("FlexLayout.react"),{align:"center",className:"_2ph_",direction:"vertical"},c("React").createElement(c("XUISpinner.react"),null));var l=this.state.taggerData.prompt;return c("React").createElement(c("ReactComposerTaggerHideOnEscapeKeyPress.react"),null,c("React").createElement(c("ReactComposerFunFactTaggerComponent.react"),{emoji:l.emoji,onClose:this.$ReactComposerFunFactSinglePromptTaggerContainer2,showCloseButton:true,title:l.title}))};k.contextTypes=c("ReactComposerContextTypes");f.exports=c("FluxContainer").create(k,{withContext:true,withProps:true})}),null);